!function(){var a=function(){this.hash=function(a){return String(a).split("").reduce(function(a,b){return a=(a<<5)-a+b.charCodeAt(0),a&a},0)}};Heart=function(e,f,g,h){var i=["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#607D8B"];this.canvas=e,this.context=f,this.primary,this.accent,this.margin=g||5,this.scale=h||20,this.cellSize=this.canvas.width/2-this.margin*this.scale,this.hash,this.blocks,this.shape,this.hasStroke=!0,this.strokeWeight=500,this.compositeOperation="multiply",this.setUsername=function(b){var c=new a;this.hash=c.hash(b)},this.setPalette=function(a){return typeof a!=typeof[]||void 0===a.length?(console.warn("The palette must be an array of color values."),!1):a.length<2?(console.warn("The palette must contain at least two values."),!1):void(i=a)},this.setHasStroke=function(a){return"boolean"!=typeof a?(console.warn("The parameter for the function Heart.setHasStroke() must be a boolean."),!1):void(this.hasStroke=a)},this.setStrokeWeight=function(a){return"number"!=typeof a?(console.warn("The parameter for the function Heart.setStrokeWeight() must be a number."),!1):void(this.strokeWeight=a)},this.setCompositeOperation=function(a){var b=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"];return a=a.toLowerCase(),-1===b.indexOf(a)?(console.warn('The provided composite operation "'+a+'" does not exist.'),!1):void(this.compositeOperation=a)},this.setCanvas=function(a){return a instanceof HTMLElement?"CANVAS"!==a.tagName?(console.warn("The parameter for the function IdentiHeart.setCanvas() must be a <canvas> element."),!1):(this.canvas=a,void(this.context=a.getContext("2d"))):(console.warn("The parameter for the function IdentiHeart.setCanvas() must be a DOM Element."),!1)},this.draw=function(){this.init(),this.context.save(),this.context.translate(e.width/2,e.height/2),this.context.rotate(-Math.PI/4),this.context.translate(-e.width/2,-e.height/2),this.generateBlocks(),this.drawBlocks(),this.hasStroke&&this.drawOutline(),this.shape=new d(this.canvas,this.context,this.hash,this.primary,this.accent,{x:this.margin*this.scale+1.5*this.cellSize,y:this.margin*this.scale+.5*this.cellSize},this.scale,this.cellSize),this.shape.draw(this.hasStroke,this.strokeWeight),this.context.restore()},this.init=function(){this.blocks=new Array,this.shape=null,this.primary=i[Math.abs(this.hash%i.length)];var b=new a,c=b.hash(this.hash);this.accent=i[Math.abs(c%i.length)],this.context.globalCompositeOperation="source-over",this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.globalCompositeOperation=this.compositeOperation},this.offset=function(){this.context.save(),this.context.translate(.6*this.scale,-.6*this.scale)},this.resetOffset=function(){this.context.restore()},this.drawOutline=function(){this.offset(),this.context.globalCompositeOperation="source-over",this.context.beginPath(),this.context.moveTo(this.margin*this.scale,this.margin*this.scale),this.context.lineTo(this.margin*this.scale,this.canvas.height-this.margin*this.scale),this.context.lineTo(this.canvas.width-this.margin*this.scale,this.canvas.height-this.margin*this.scale),this.context.lineTo(this.canvas.width-this.margin*this.scale,this.canvas.height/2),this.context.lineTo(this.canvas.width/2,this.canvas.height/2),this.context.lineTo(this.canvas.width/2,this.margin*this.scale),this.context.closePath(),this.context.strokeStyle="black",this.context.lineWidth=this.scale*(this.strokeWeight/this.canvas.width),this.context.lineJoin="round",this.context.lineCap="round",this.context.stroke(),this.context.beginPath(),this.context.moveTo(this.canvas.width/2,this.canvas.height/2),this.context.lineTo(this.margin*this.scale,this.canvas.height/2),this.context.moveTo(this.canvas.width/2,this.canvas.height/2),this.context.lineTo(this.canvas.width/2,this.canvas.height-this.margin*this.scale),this.context.stroke(),this.resetOffset(),this.context.globalCompositeOperation=this.compositeOperation},this.generateBlocks=function(){var a=new c(this.canvas,this.context,b.ONE,this.primary,this.accent);a.setHash(this.hash),a.setPos({x:this.margin*this.scale,y:this.margin*this.scale}),a.setSizing(this.cellSize,this.margin,this.scale),this.blocks.push(a);var d=new c(this.canvas,this.context,b.TWO,this.primary,this.accent);d.setHash(this.hash),d.setPos({x:this.margin*this.scale,y:this.canvas.height/2}),d.setSizing(this.cellSize,this.margin,this.scale),this.blocks.push(d);var e=new c(this.canvas,this.context,b.THREE,this.primary,this.accent);e.setHash(this.hash),e.setPos({x:this.canvas.width/2,y:this.canvas.height/2}),e.setSizing(this.cellSize,this.margin,this.scale),this.blocks.push(e)},this.drawBlocks=function(){if(0==this.blocks.length)return!1;for(var a=0;a<this.blocks.length;a++)this.blocks[a].draw()}};var b=new function(){this.ONE=1,this.TWO=2,this.THREE=3},c=function(a,c,d,e,f){this.type=d,this.primary=e,this.accent=f,this.cellSize,this.margin,this.scale,this.pos,this.hash,this.setHash=function(a){return"number"!=typeof a?(console.warn("The provided hash must be a number."),!1):void(this.hash=a)},this.setPos=function(a){return"object"!=typeof a?(console.warn("The position must be an object."),!1):void(this.pos=a)},this.setSizing=function(a,b,c){return"number"!=typeof a||"number"!=typeof b||"number"!=typeof c?(console.warn("Sizing parameters must be numbers."),!1):(this.cellSize=a,this.margin=b,void(this.scale=c))},this.offset=function(){c.save(),c.translate(.6*this.scale,-.6*this.scale)},this.resetOffset=function(){c.restore()},this.makePath=function(a,b){var d=Math.abs(a+b)%4;switch(d){case 0:c.beginPath(),c.moveTo(this.pos.x,this.pos.y),c.lineTo(this.pos.x+this.cellSize,this.pos.y),c.lineTo(this.pos.x+this.cellSize,this.pos.y+this.cellSize),c.closePath();break;case 1:c.beginPath(),c.moveTo(this.pos.x+this.cellSize,this.pos.y),c.lineTo(this.pos.x+this.cellSize,this.pos.y+this.cellSize),c.lineTo(this.pos.x,this.pos.y+this.cellSize),c.closePath();break;case 2:c.beginPath(),c.moveTo(this.pos.x,this.pos.y),c.lineTo(this.pos.x,this.pos.y+this.cellSize),c.lineTo(this.pos.x+this.cellSize,this.pos.y+this.cellSize),c.closePath();break;case 3:c.beginPath(),c.moveTo(this.pos.x,this.pos.y),c.lineTo(this.pos.x+this.cellSize,this.pos.y),c.lineTo(this.pos.x,this.pos.y+this.cellSize),c.closePath();break;default:c.beginPath(),c.moveTo(this.pos.x,this.pos.y),c.lineTo(this.pos.x+this.cellSize,this.pos.y),c.lineTo(this.pos.x,this.pos.y+this.cellSize),c.closePath()}},this.draw=function(){this.offset(),this.type===b.ONE?(this.makePath(this.hash,this.hash%3),c.fillStyle=this.primary,c.fill(),this.makePath(this.hash,this.hash%5),c.fillStyle=this.accent,c.fill()):this.type===b.TWO?(this.makePath(this.hash,this.hash%4),c.fillStyle=this.accent,c.fill(),this.makePath(this.hash,this.hash%3),c.fillStyle=this.primary,c.fill()):(this.makePath(this.hash,this.hash%7),c.fillStyle=this.accent,c.fill(),this.makePath(this.hash,this.hash%8),c.fillStyle=this.primary,c.fill()),this.resetOffset()}},d=function(a,b,c,d,e,f,g,h){this.hash=c,this.primary=d,this.accent=e,this.pos=f,this.scale=g,this.cellSize=h,this.getColor=function(){return[this.primary,this.accent][Math.abs(this.hash%2)]},this.makePath=function(){var a=Math.abs(this.hash+1)%4;switch(a){case 0:b.beginPath(),b.moveTo(this.pos.x,this.pos.y),b.lineTo(this.pos.x+this.cellSize/2,this.pos.y),b.lineTo(this.pos.x+this.cellSize/2,this.pos.y-this.cellSize/2),b.lineTo(this.pos.x,this.pos.y-this.cellSize/2),b.closePath();break;case 1:b.beginPath(),b.arc(this.pos.x+this.cellSize/Math.PI-5,this.pos.y-this.cellSize/Math.PI+5,this.cellSize/3,0,2*Math.PI,!0);break;case 2:b.beginPath(),b.moveTo(this.pos.x,this.pos.y),b.lineTo(this.pos.x+.65*this.cellSize,this.pos.y),b.lineTo(this.pos.x,this.pos.y-.65*this.cellSize),b.closePath();break;case 3:b.beginPath(),b.moveTo(this.pos.x-.2*this.cellSize,this.pos.y+.2*this.cellSize),b.quadraticCurveTo(this.pos.x+.4*this.cellSize,this.pos.y,this.pos.x+.5*this.cellSize,this.pos.y-.5*this.cellSize),b.moveTo(this.pos.x+.5*this.cellSize,this.pos.y-.5*this.cellSize),b.quadraticCurveTo(this.pos.x,this.pos.y-.4*this.cellSize,this.pos.x-.2*this.cellSize,this.pos.y+.2*this.cellSize);break;default:b.beginPath(),b.moveTo(this.pos.x,this.pos.y),b.lineTo(this.pos.x+this.cellSize/2,this.pos.y),b.lineTo(this.pos.x+this.cellSize/2,this.pos.y-this.cellSize/2),b.lineTo(this.pos.x,this.pos.y-this.cellSize/2),b.closePath()}},this.draw=function(c,d){var e=this.getColor();b.globalCompositeOperation="source-over",this.makePath(),b.fillStyle=e,b.strokeStyle="black",b.lineWidth=this.scale*(.8*d/a.width),b.lineJoin="round",b.lineCap="round",b.fill(),c&&b.stroke()}}}();